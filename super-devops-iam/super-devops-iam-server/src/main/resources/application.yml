# Copyright (c) 2017 ~ 2025, the original author wangl.sir individual Inc,
# All rights reserved. Contact us 983708408@qq.com
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

# #### Environment base configuration. ####
#
spring:
  profiles:
    include: common,util
  web:
    cors:
      enabled: true # Default: true
      rules:
        /**:
          allowsMethods: GET,POST
          allowsHeaders:
            - X-Iam-Authentication-Token
          # Note: Some latest browsers, such as chrome 80.x+, only support sharing with the sub domain of the top-level domain name CORS.
          # You can also manually turn off the chrome switch(@see https://chromestatus.com/features/5088147346030592), visit chrome://flags
          # and search for samesite, find the options [SameSite by default cookies] and [Cookies without SameSite must be secure] set 
          # to disabled and restart chrome, but this is not recommended! For more solutions, please refer to: ideas like JWT/CAS/Oauth2 are extended.
          # 
          allowCredentials: true
          allowsOrigins:
            #- '*'
    xss:
      enabled: true # Default: true
      expression: execution(* com.wl4g.devops.iam.common.*.*Controller.*(..)) or
                  execution(* com.wl4g.devops.iam.sns.*.*Controller.*(..)) or
                  execution(* com.wl4g.devops.iam.*.*Controller.*(..))

# Mybatis configuration.
mybatis:
  configLocation: mybatis/mybatis-config.xml
  mapperLocations: classpath:mybatis/**/*Mapper.xml
  typeAliasesPackage: com.wl4g.devops.common.bean.*,com.wl4g.devops.common.bean.*.*

# Logging configuration.
logging:
  file: ${server.tomcat.basedir}/logs/${spring.application.name}.log
  pattern:
    #console: ${logging.pattern.file}
    #file: '%d{yy-MM-dd HH:mm:ss.SSS} ${LOG_LEVEL_PATTERN:%4p} ${PID} [%t] [%X{_H_:X-Request-ID}] [%X{_H_:X-Request-Seq}] [%X{_C_:${spring.cloud.devops.iam.cookie.name}}] - %-40.40logger{39} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:%wEx}'
  root: INFO
  # Custom configuration(Non spring-boot standard).
  policy:
    maxFileSize: 1GB
    minIndex: 1
    maxIndex: 10
  level:
    de.codecentric.boot.admin: INFO
    org:
      springframework: INFO
      apache: INFO
    com:
      wl4g.devops.dao: DEBUG